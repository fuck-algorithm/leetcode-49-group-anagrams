# 实现计划

- [x] 1. 项目初始化与基础配置
  - [x] 1.1 使用Vite创建React + TypeScript项目
    - 初始化项目结构
    - 配置TypeScript
    - 安装依赖: react, react-dom, d3, prism-react-renderer
    - _需求: 1.1, 1.3_
  - [x] 1.2 配置ESLint和Prettier
    - 添加代码规范配置
    - _需求: 1.3_
  - [x] 1.3 创建基础目录结构
    - 创建components、hooks、utils、types、styles目录
    - _需求: 1.3_

- [x] 2. 核心类型定义与工具函数
  - [x] 2.1 定义核心TypeScript接口
    - 创建ProgrammingLanguage、LineNumberMapping、AlgorithmStep、PlaybackState、InputData、CanvasTransform、UserPreferences、StarCache接口
    - _需求: 10.1, 10.2_
  - [x] 2.2 实现IndexedDB工具函数
    - 创建数据库初始化函数
    - 实现语言偏好存储/读取
    - 实现播放速度存储/读取
    - 实现GitHub Star缓存存储/读取
    - _需求: 2.4, 2.5, 3.3, 5.8_
  - [x] 2.3 编写属性测试: 语言选择持久化
    - **Property 10: 语言选择持久化**
    - **验证: 需求 3.3, 3.4**
  - [x] 2.4 编写属性测试: 播放速度持久化
    - **Property 11: 播放速度持久化**
    - **验证: 需求 5.8, 5.9**
  - [x] 2.5 编写属性测试: Star缓存有效期
    - **Property 12: Star缓存有效期**
    - **验证: 需求 2.4**

- [x] 3. 算法步骤生成器实现
  - [x] 3.1 实现算法步骤生成器
    - 实现groupAnagrams算法
    - 生成包含多语言行号映射的步骤序列
    - 记录变量状态、描述、数据结构状态
    - 详细划分每个操作步骤
    - _需求: 10.1, 10.2, 10.3, 10.4, 10.5, 10.6_
  - [x] 3.2 编写属性测试: 步骤完整性
    - **Property 8: 步骤完整性**
    - **验证: 需求 10.1, 10.2, 10.3, 10.4, 10.5**

- [x] 4. 输入验证实现
  - [x] 4.1 实现输入数据验证函数
    - 验证字符串只包含小写字母
    - 验证数组长度在[1, 10000]范围内
    - 验证每个字符串长度在[0, 100]范围内
    - 返回详细错误信息
    - _需求: 7.5, 7.6, 7.7, 7.8, 7.9_
  - [x] 4.2 编写属性测试: 输入验证正确性
    - **Property 7: 输入验证正确性**
    - **验证: 需求 7.5, 7.6, 7.7, 7.8, 7.9**

- [x] 5. 检查点 - 确保所有测试通过
  - 确保所有测试通过，如有问题请询问用户

- [x] 6. Header组件实现
  - [x] 6.1 创建Header组件
    - 显示标题"49. 字母异位词分组"
    - 标题链接到LeetCode题目页面（新标签页打开）
    - 左上角显示GitHub徽标
    - GitHub徽标链接到仓库（新标签页打开）
    - 显示Star数
    - 悬停提示"点击去GitHub仓库Star支持一下"
    - _需求: 1.1, 1.2, 2.1, 2.2, 2.3, 2.8_
  - [x] 6.2 实现GitHub Star获取逻辑
    - 使用GitHub API获取Star数
    - 一小时内不重复请求
    - API失败时读取缓存
    - 无缓存时显示默认值0
    - _需求: 2.4, 2.5, 2.6, 2.7_
  - [x] 6.3 创建Header样式
    - 实现响应式布局
    - _需求: 1.3_

- [x] 7. InputPanel组件实现
  - [x] 7.1 创建InputPanel组件
    - 文本输入框接受用户输入
    - 内置样例按钮（平铺展示）
    - 随机生成按钮
    - 运行按钮
    - 错误提示显示
    - _需求: 7.1, 7.2, 7.3, 7.9_
  - [x] 7.2 实现随机数据生成函数
    - 生成符合约束的随机字符串数组
    - 字符串仅包含小写字母
    - _需求: 7.4_
  - [x] 7.3 编写属性测试: 随机数据合法性
    - **Property 6: 随机数据合法性**
    - **验证: 需求 7.4**
  - [x] 7.4 创建InputPanel样式
    - 紧凑布局
    - _需求: 7.1_

- [x] 8. CodePanel组件实现
  - [x] 8.1 创建CodePanel组件基础结构
    - 语言切换选项卡（Java、Python、Golang、JavaScript）
    - 行号显示
    - 语法高亮（使用prism-react-renderer）
    - _需求: 3.1, 3.2, 3.5_
  - [x] 8.2 实现语言切换与持久化
    - 切换语言时保存到IndexedDB
    - 页面加载时恢复上次选择的语言
    - _需求: 3.3, 3.4_
  - [x] 8.3 实现当前行高亮功能
    - 根据当前步骤和选择的语言高亮对应代码行
    - _需求: 3.6_
  - [x] 8.4 编写属性测试: 代码行高亮同步
    - **Property 4: 代码行高亮同步**
    - **验证: 需求 3.6**
  - [x] 8.5 实现变量值内联显示
    - 在代码行右侧显示变量当前值
    - _需求: 3.7_
  - [x] 8.6 编写属性测试: 变量显示同步
    - **Property 5: 变量显示同步**
    - **验证: 需求 3.7**
  - [x] 8.7 创建CodePanel样式
    - 代码对齐
    - 高亮样式
    - 适中的宽度和高度，避免滚动条
    - _需求: 3.8, 3.9_

- [x] 9. 检查点 - 确保所有测试通过
  - 确保所有测试通过，如有问题请询问用户

- [x] 10. Canvas组件实现
  - [x] 10.1 创建Canvas组件基础结构
    - 使用D3.js创建SVG画布
    - 分配页面绝大部分空间
    - _需求: 4.1_
  - [x] 10.2 实现输入数组可视化
    - 绘制输入字符串数组
    - _需求: 4.2_
  - [x] 10.3 实现HashMap数据结构可视化
    - 清晰展示key和value
    - _需求: 4.3_
  - [x] 10.4 实现画布拖拽功能
    - 支持鼠标拖动平移
    - _需求: 4.4_
  - [x] 10.5 实现画布缩放功能
    - 支持鼠标滚轮缩放
    - _需求: 4.5_
  - [x] 10.6 实现自适应视图调整
    - 大型数据结构自动调整视图
    - _需求: 4.6_
  - [x] 10.7 实现文字说明标签
    - 显示当前处理的字符串
    - 显示排序后的key
    - _需求: 4.7_
  - [x] 10.8 编写属性测试: 画布状态同步
    - **Property 9: 画布状态同步**
    - **验证: 需求 4.7**
  - [x] 10.9 实现数据流箭头指示
    - 箭头指示数据流向
    - 箭头旁显示说明文字
    - _需求: 4.8_
  - [x] 10.10 实现分组动画效果
    - 字符串移动到分组的动画
    - _需求: 4.9_
  - [x] 10.11 实现元素分散布局
    - 确保元素分散在画布上，避免重叠
    - _需求: 4.10_
  - [x] 10.12 创建Canvas样式
    - _需求: 4.1_

- [x] 11. ControlPanel组件实现
  - [x] 11.1 创建ControlPanel组件
    - 上一步按钮（显示←快捷键提示）
    - 下一步按钮（显示→快捷键提示）
    - 播放/暂停按钮（显示空格快捷键提示）
    - 重置按钮（显示R快捷键提示）
    - _需求: 5.1, 5.2, 5.3, 5.4, 5.5, 5.6_
  - [x] 11.2 实现播放控制逻辑
    - 上一步/下一步逻辑
    - 播放/暂停逻辑
    - 重置逻辑
    - _需求: 5.1, 5.2, 5.3, 5.4, 5.5_
  - [x] 11.3 编写属性测试: 步骤导航一致性
    - **Property 1: 步骤导航一致性**
    - **验证: 需求 5.1, 5.2**
  - [x] 11.4 编写属性测试: 重置状态一致性
    - **Property 2: 重置状态一致性**
    - **验证: 需求 5.5**
  - [x] 11.5 实现键盘快捷键
    - 左方向键: 上一步
    - 右方向键: 下一步
    - 空格键: 播放/暂停
    - R键: 重置
    - _需求: 5.1, 5.2, 5.3, 5.4, 5.5_
  - [x] 11.6 实现播放速度调节
    - 自定义速度调节组件（非原生）
    - 默认速度1x
    - 速度选择保存到IndexedDB
    - 页面加载时恢复上次速度
    - _需求: 5.7, 5.8, 5.9, 5.10_
  - [x] 11.7 实现进度条组件
    - 可拖拽进度条
    - 已播放部分绿色，未播放部分灰色
    - 类似视频播放器的拖拽交互
    - _需求: 6.1, 6.2, 6.3, 6.4_
  - [x] 11.8 编写属性测试: 进度条同步
    - **Property 3: 进度条同步**
    - **验证: 需求 6.3**
  - [x] 11.9 创建ControlPanel样式
    - _需求: 5.6, 6.1_

- [x] 12. 检查点 - 确保所有测试通过
  - 确保所有测试通过，如有问题请询问用户

- [x] 13. WeChatFloat组件实现
  - [x] 13.1 下载微信二维码图片到静态资源
    - 从指定URL下载图片
    - 保存到public目录
    - _需求: 8.3_
  - [x] 13.2 创建WeChatFloat组件
    - 右下角悬浮球（显示"交流群"字样）
    - 悬停显示二维码
    - 提示文案"微信扫码发送'leetcode'加入算法交流群"
    - _需求: 8.1, 8.2, 8.4_
  - [x] 13.3 创建WeChatFloat样式
    - 保持图片原有比例
    - _需求: 8.3_

- [x] 14. App组件集成
  - [x] 14.1 创建App组件
    - 集成所有子组件
    - 管理全局状态
    - _需求: 1.3_
  - [x] 14.2 实现状态管理
    - 使用React hooks管理播放状态
    - 组件间状态同步
    - _需求: 3.6, 3.7, 4.7_
  - [x] 14.3 创建App样式
    - 单屏幕布局
    - 协调统一的配色方案
    - 严禁使用紫色
    - _需求: 1.3, 11.1, 11.2_

- [x] 15. GitHub Actions配置
  - [x] 15.1 创建GitHub Actions工作流
    - 配置构建和部署流程
    - 部署到GitHub Pages
    - _需求: 9.1, 9.2, 9.3_
  - [x] 15.2 配置Vite的base路径
    - 适配GitHub Pages部署
    - _需求: 9.3_

- [x] 16. 最终检查点 - 确保所有测试通过
  - 确保所有测试通过，如有问题请询问用户
  - 本地构建验证无编译错误
  - 本地构建验证无linter错误
